{% extends "layout.html" %}

{% block title %}Khách hàng{% endblock %}

{% block content %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="{{url_for('static', filename='style/customer.css')}}">
<div class="container">
    <div class="card">
        <div class="card-body">
            <div class="title-chart">Data Visualization</div>
            <div class="chart-other">
                <div class="chart-tranferpot">
                    <img src="{{url_for('static', filename='images/pie.png')}}",alt="Chart 1">
                </div>  
                <div class="chart-tranferpot">
                    <img src="{{url_for('static', filename='images/pie.png')}}",alt="Chart 1">
                </div>  
                <div class="chart-tranferpot">
                    <img src="{{url_for('static', filename='images/pie.png')}}",alt="Chart 1">
                </div>      
            </div>   
        </div>
    </div>
    <div class="card">
        <div class="card-body">
            <form class="form-Search" role="search">
                <input class="search" type="search" placeholder="Tìm kiếm khách hàng hoặc ID..." aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Tìm kiếm</button>
            </form>
            <div class="filter">
                <select class="segmentFilter form-select" >
                    <option value="">Tất cả Segment</option>
                    <option value="Consumer">Consumer</option>
                    <option value="Corporate">Corporate</option>
                    <option value="Home Office">Home Office</option>
                </select>
                <select class="countryFilter form-select" >
                    <option value="">Tất cả Country</option>
                    <option value="United States">United States</option>
                    <option value="Canada">Canada</option>
                    <option value="Mexico">Mexico</option>
                </select>
                <button id="applyFilters" class="custom-button">Áp dụng</button>
            </div>
        </div>    
    </div>
    <table>
        <thead>
            <tr>
                <th>STT</th>
                <th>Name</th>
                <th>ID Customer</th>
                <th>Segment</th>
                <th>Country</th>
                <th>Quantity
                    <span class="icon btn-sort">
                        <i class="fas fa-sort" name="desc"></i>
                    </span>
                </th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for customer in records %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ customer.Name }}</td>
                    <td>{{ customer.IDCustomer }}</td>
                    <td>{{ customer.Segment }}</td>
                    <td>{{ customer.Country }}</td>
                    <td>{{ customer.Quantity }}</td>
                    <td>
                        <a href="/admin/products/edit/{{ customer._id }}" class="btn btn-warning btn-sm">Sửa</a>
                        <button class="btn btn-danger btn-sm ml-2" data-id="{{ customer._id }}" id="button-delete">Xoá</button>
                    </td>
                </tr>
                {% endfor %}
        </tbody>
    </table>
    <nav aria-label="...">
        <ul class="pagination">
            <li class="page-item disabled">
                <a class="page-link">Previous</a>
            </li>
            {% if total_pages <= 7 %}
                {% for i in range(page, total_pages + 1) %}
                    <li class="page-item"><a class="page-link" href="/customer?page={{ i }}">{{ i }}</a></li>
                {% endfor %}
            {% else %}
                {% if page <= 4 %}
                    {% for i in range(1, 6) %}
                        <li class="page-item"><a class="page-link" href="/customer?page={{ i }}">{{ i }}</a></li>
                    {% endfor %}
                    <li class="page-item"><a class="page-link" href="#">...</a></li>
                    <li class="page-item"><a class="page-link" href="/customer?page={{ total_pages }}">{{ total_pages }}</a></li>
                {% elif page >= total_pages - 3 %}
                    <li class="page-item"><a class="page-link" href="/customer?page=1">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">...</a></li>
                    {% for i in range(total_pages - 4, total_pages + 1) %}
                        <li class="page-item"><a class="page-link" href="/customer?page={{ i }}">{{ i }}</a></li>
                    {% endfor %}
                {% else %}
                    <li class="page-item"><a class="page-link" href="/customer?page=1">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">...</a></li>
                    {% for i in range(page - 1, page + 2) %}
                        <li class="page-item"><a class="page-link" href="/customer?page={{ i }}">{{ i }}</a></li>
                    {% endfor %}
                    <li class="page-item"><a class="page-link" href="#">...</a></li>
                    <li class="page-item"><a class="page-link" href="/customer?page={{ total_pages }}">{{ total_pages }}</a></li>
                {% endif %}
            {% endif %}
            <li class="page-item">
                <a class="page-link" href="#">Next</a>
            </li>
        </ul>
    </nav>

<script src="{{url_for('static', filename='js/customer.js')}}"></script>
{%endblock%}